{"ast":null,"code":"var _jsxFileName = \"/Users/jakemastroianni/Repos/professional-work/take-home-challenge/photo-gallery/client/src/components/FileInput.js\",\n  _s = $RefreshSig$();\nimport { useRef, useState } from \"react\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport storage from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileInput = _ref => {\n  _s();\n  let {\n    name,\n    label,\n    value,\n    type,\n    handleInputState,\n    ...rest\n  } = _ref;\n  const inputRef = useRef();\n  const [progress, setProgress] = useState(0);\n  const [progressShow, setProgressShow] = useState(false);\n  const handleUpload = () => {\n    setProgressShow(true);\n    const fileName = new Date().getTime() + value.name;\n    const storageRef = ref(storage, `/images/${fileName}`);\n    const uploadTask = uploadBytesResumable(storageRef, value);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const uploaded = Math.floor(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(uploaded);\n    }, error => {\n      console.log(error);\n    }, () => {\n      getDownloadURL(uploadTask.snapshot.ref).then(url => {\n        handleInputState(name, url);\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      ref: inputRef,\n      onChange: e => handleInputState(name, e.currentTarget.files[0]),\n      vlaue: value,\n      className: \"file-input file-input-bordered mb-3 file-input-primary w-full max-w-xs\",\n      ...rest\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: () => inputRef.current.click(),\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this), type === \"image\" && value && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card w-96 h-96 bg-base-100 shadow-xl\",\n      children: /*#__PURE__*/_jsxDEV(\"figure\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"max-w-sm max-h-sm rounded-lg shadow-2xl\",\n          src: typeof value === \"string\" ? value : URL.createObjectURL(value),\n          alt: \"file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this), value !== null && !progressShow && typeof value !== \"string\" && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary mb-3\",\n      onClick: handleUpload,\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }, this), progressShow && progress < 100 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [progress, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }, this), progress === 100 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Success\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 3\n  }, this);\n};\n_s(FileInput, \"53dQUYJBsrB5vkxhpaput+H/XLk=\");\n_c = FileInput;\nexport default FileInput;\nvar _c;\n$RefreshReg$(_c, \"FileInput\");","map":{"version":3,"names":["useRef","useState","ref","uploadBytesResumable","getDownloadURL","storage","FileInput","name","label","value","type","handleInputState","rest","inputRef","progress","setProgress","progressShow","setProgressShow","handleUpload","fileName","Date","getTime","storageRef","uploadTask","on","snapshot","uploaded","Math","floor","bytesTransferred","totalBytes","error","console","log","then","url","e","currentTarget","files","current","click","URL","createObjectURL"],"sources":["/Users/jakemastroianni/Repos/professional-work/take-home-challenge/photo-gallery/client/src/components/FileInput.js"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport storage from \"../firebase\";\n\n\n\nconst FileInput = ({ name, label, value, type, handleInputState, ...rest }) => {\n\tconst inputRef = useRef();\n\tconst [progress, setProgress] = useState(0);\n\tconst [progressShow, setProgressShow] = useState(false);\n\n\tconst handleUpload = () => {\n\t\tsetProgressShow(true);\n\t\tconst fileName = new Date().getTime() + value.name;\n\t\tconst storageRef = ref(\n\t\t\tstorage,\n\t\t\t`/images/${fileName}`\n\t\t);\n\t\tconst uploadTask = uploadBytesResumable(storageRef, value);\n\t\tuploadTask.on(\n\t\t\t\"state_changed\",\n\t\t\t(snapshot) => {\n\t\t\t\tconst uploaded = Math.floor(\n\t\t\t\t\t(snapshot.bytesTransferred / snapshot.totalBytes) * 100\n\t\t\t\t);\n\t\t\t\tsetProgress(uploaded);\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tgetDownloadURL(uploadTask.snapshot.ref).then((url) => {\n\t\t\t\t\thandleInputState(name, url);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\treturn (\n\t\t<div >\n\t\t\t<input\n\t\t\t\ttype=\"file\"\n\t\t\t\tref={inputRef}\n\t\t\t\tonChange={(e) => handleInputState(name, e.currentTarget.files[0])}\n\t\t\t\tvlaue={value}\n\t\t\t\tclassName=\"file-input file-input-bordered mb-3 file-input-primary w-full max-w-xs\"\n\t\t\t\t{...rest}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => inputRef.current.click()}\n\t\t\t\t\n\t\t\t>\n\t\t\t\t{label}\n\t\t\t</button>\n\t\t\t{type === \"image\" && value && (\n\t\t\t\t<div className=\"card w-96 h-96 bg-base-100 shadow-xl\">\n\t\t\t\t<figure><img\n\t\t\t\t\tclassName=\"max-w-sm max-h-sm rounded-lg shadow-2xl\"\n\t\t\t\t\tsrc={typeof value === \"string\" ? value : URL.createObjectURL(value)}\n\t\t\t\t\talt=\"file\"\n\t\t\t\t\t\n\t\t\t\t/></figure>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{value !== null && !progressShow && typeof value !== \"string\" && (\n\t\t\t\t<button className=\"btn btn-primary mb-3\" onClick={handleUpload} >\n\t\t\t\t\tUpload\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t{progressShow && progress < 100 && (\n\t\t\t\t<div >\n\t\t\t\t\t<p>{progress}%</p>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{progress === 100 && (\n\t\t\t\t<div >\n\t\t\t\t\t<h2>Success</h2>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default FileInput;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}